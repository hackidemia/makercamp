<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" dir="ltr">
<head>
<title>Matlab and DAQ - Neuromechatronics Wiki</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="MediaWiki 1.16.0beta3" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/neuromech/opensearch_desc.php" title="Neuromechatronics Wiki (en)" />
<link rel="alternate" type="application/atom+xml" title="Neuromechatronics Wiki Atom feed" href="/neuromech/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="/neuromech/skins/common/shared.css?269" media="screen" />
<link rel="stylesheet" href="/neuromech/skins/common/commonPrint.css?269" media="print" />
<link rel="stylesheet" href="/neuromech/skins/monobook/main.css?269" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/neuromech/skins/monobook/IE50Fixes.css?269" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/neuromech/skins/monobook/IE55Fixes.css?269" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/neuromech/skins/monobook/IE60Fixes.css?269" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/neuromech/skins/monobook/IE70Fixes.css?269" media="screen" /><![endif]-->
<link rel="stylesheet" href="/neuromech/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="/neuromech/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" />
<link rel="stylesheet" href="/neuromech/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="/neuromech/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" />
<script>
var skin="monobook",
stylepath="/neuromech/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/neuromech/index.php/$1",
wgScriptPath="/neuromech",
wgScriptExtension=".php",
wgScript="/neuromech/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://ediacaran.mech.northwestern.edu",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="Matlab_and_DAQ",
wgTitle="Matlab and DAQ",
wgAction="view",
wgArticleId=2460,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=5785,
wgVersion="1.16.0beta3",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "Neuromechatronics Wiki", "5": "Neuromechatronics Wiki talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "100": "Restrict", "101": "Restrict talk", "274": "Widget", "275": "Widget talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "neuromechatronics_wiki": 4, "neuromechatronics_wiki_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "restrict": 100, "restrict_talk": 101, "widget": 274, "widget_talk": 275, "image": 6, "image_talk": 7},
wgSiteName="Neuromechatronics Wiki",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script><script src="/neuromech/skins/common/wikibits.js?269"></script>
<script src="/neuromech/skins/common/ajax.js?269"></script>
<script src="/neuromech/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook&amp;269"></script>

</head>
<body class="mediawiki ltr ns-0 ns-subject page-Matlab_and_DAQ skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content" >
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">Matlab and DAQ</h1>
	<div id="bodyContent">
		<h3 id="siteSub">From Neuromechatronics Wiki</h3>
		<div id="contentSub"></div>
		<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
		<!-- start content -->
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#daqhwinfo.28_.29"><span class="tocnumber">1</span> <span class="toctext">daqhwinfo( )</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Frog_Lab:_daq2axis.m"><span class="tocnumber">2</span> <span class="toctext">Frog Lab: daq2axis.m</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Traditional_NI-DAQ_vs_NI-DAQmx"><span class="tocnumber">3</span> <span class="toctext">Traditional NI-DAQ vs NI-DAQmx</span></a></li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<p><br />
</p>
<h2> <span class="mw-headline" id="daqhwinfo.28_.29">daqhwinfo( )</span></h2>
<p>This function, part of the MATLAB Data Acquisition Toolbox, will report the recognized DAQ hardware attached to the computer. To query the Target PC 's hardware, enter the command shown in the screenshots below in the MATLAB console. The response data should match what's shown if your hardware is properly configured.
</p>
<dl><dt>National Instruments (nidaq)
</dt><dd><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:551px;"><a href="/neuromech/index.php/File:Trouble_Matlab_daqhwinfo.jpg" class="image"><img alt="Trouble Matlab daqhwinfo.jpg" src="/neuromech/img_auth.php/a/af/Trouble_Matlab_daqhwinfo.jpg" width="549" height="340" class="thumbimage" /></a>  <div class="thumbcaption"></div></div></div></div>
</dd><dt>Measurement Computing (mcc)
</dt><dd><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:770px;"><a href="/neuromech/index.php/File:Trouble_Matlab_daqhwinfo_mcc.jpg" class="image"><img alt="Trouble Matlab daqhwinfo mcc.jpg" src="/neuromech/img_auth.php/6/63/Trouble_Matlab_daqhwinfo_mcc.jpg" width="768" height="218" class="thumbimage" /></a>  <div class="thumbcaption"></div></div></div></div>
</dd></dl>
<dl><dt>Points to note
</dt><dd><b>AdaptorDllVersion</b>
<ul><li> The version of MATLAB in parentheses should match that in the AdaptorDllName value. The DLL version is synonymous with the version of the Data Acquisition toolbox, when check hardware compatibility on the Mathworks website. PCI-6602, PCI-6733 and DAS-1200JR cards are all compatible with version 2.14+
</li></ul>
</dd><dd><b>AdaptorName</b>
<ul><li> The adaptor (driver) used for NI boards in the neuromechatronics experiments is identified as 'nidaq' in MATLAB.  This driver is used for "traditional" NI-DAQ API calls, as opposed to the current NI driver, called  'nidaqmx' in MATLAB. If your target PC shows hardware only for 'nidaqmx' and not 'nidaq', you may experience problems with hardware control in the Matlab code.
</li></ul>
</dd></dl>
<h2> <span class="mw-headline" id="Frog_Lab:_daq2axis.m">Frog Lab: daq2axis.m</span></h2>
<p>daq2axis is part of the MATLAB code used to administer muscle stimulation and record muscle forces in the frog lab. It creates a GUI through which the DAQ analog inputs (DAS1200JR) and outputs(PCI-6733) are controlled. In past experiments this code had problems communicating with the DAQ analog output card, identifying  multiple instances of it - none of which worked. The following section documents steps taken to fix the DAQ hardware inventory seen by daq2axis, and get the code running.
</p><p>The problem appeared when clicking the output setup button marked below. Clicking setup tells MATLAB to query the system for available output cards.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:602px;"><a href="/neuromech/index.php/File:Trouble_Matlab_daq2axis_main.jpg" class="image"><img alt="" src="/neuromech/img_auth.php/thumb/c/c1/Trouble_Matlab_daq2axis_main.jpg/600px-Trouble_Matlab_daq2axis_main.jpg" width="600" height="430" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/neuromech/index.php/File:Trouble_Matlab_daq2axis_main.jpg" class="internal" title="Enlarge"><img src="/neuromech/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>daq2axis creates this application window, called 'daq scope'. Click to enlarge</div></div></div></div>
<p>The hardware inventory is displayed in the output setup window shown here. Multiple instances of the analog output card are listed.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:478px;"><a href="/neuromech/index.php/File:Trouble_Matlab_daq_ao_drop1.jpg" class="image"><img alt="Trouble Matlab daq ao drop1.jpg" src="/neuromech/img_auth.php/c/cd/Trouble_Matlab_daq_ao_drop1.jpg" width="476" height="296" class="thumbimage" /></a>  <div class="thumbcaption"></div></div></div></div>
<p>To fix the card inventory that MATLAB sees, the extra instances of the card should be deleted. This can be  done easily in the <b><a href="/neuromech/index.php/DAQ_Card_Utilities#Data_and_Automation_Explorer" title="DAQ Card Utilities"> NI Data and Automation Explorer</a></b>.
</p><p>After deleting the redundant devices, the next steps are to 1. reboot the pc and 2. restart MATLAB.
</p><p>Checking the nidaq cards from the MATLAB console with <a href="/neuromech/index.php/Matlab_and_DAQ#daqhwinfo.28_.29" title="Matlab and DAQ"> <b>daqhwinfo('nidaq')</b></a> should now show the correct inventory.
</p><p><br />
If the device inventory on the target PC is correct but the card still does not show up as an option in the output setup window, check the the following code:
</p>
<blockquote>In <i>getHardware.m</i>  (Same directory as daq2axis.m)<br />
<dl><dd>line 80:
<dl><dt>Change
</dt><dd>supported_daqTypes = {'mcc','winsound','ni'};
</dd><dt>To
</dt><dd>supported_daqTypes = {'mcc','winsound','ni', <b> 'nidaq' </b>};
</dd></dl>
</dd></dl>
</blockquote>
<p>It might also be worth setting a breakpoint here in the code and stepping through to make sure that the hardware is recognized.
</p>
<h2> <span class="mw-headline" id="Traditional_NI-DAQ_vs_NI-DAQmx">Traditional NI-DAQ vs NI-DAQmx</span></h2>
<p>Some of the lab MATLAB code that communicates with the DAQ cards produces warnings (not errors) in the console like the following:
</p>
<blockquote><b>Warning:</b> Support for the National Instruments Traditional NI-DAQ driver will not be provided in future releases of Data Acquisition Toolbox. Instead, it will be available as a separate download. Consider upgrading to the NI-DAQmx version if it supports your hardware.
See Solution 1-5LI9NF for details.<br />

</blockquote>
<p>This warning appears because the neuromechatronics MATLAB code was written using the Traditional NI-DAQ (Legacy) API, available in  NI-DAQ 7.04 and earlier. It does not affect the performance of the code on the existing rig setups, though updates to MATLAB and/or the DAQ hardware will require code modifications to use the new NI-DAQmx driver.
</p><p><br />
</p>
<dl><dd>Read more about <a href="http://www.mathworks.com/support/solutions/en/data/1-5LI9NF/index.html?product=ML&amp;solution=1-5LI9NF" class="external text" rel="nofollow"><b>Solution 1-5LI9NF</b> (Mathworks site) </a>
</dd></dl>

<!-- 
NewPP limit report
Preprocessor node count: 11/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nmdb:pcache:idhash:2460-0!1!0!!en!2!edit=0 and timestamp 20120704202414 -->
<div class="printfooter">
Retrieved from "<a href="http://ediacaran.mech.northwestern.edu/neuromech/index.php/Matlab_and_DAQ">http://ediacaran.mech.northwestern.edu/neuromech/index.php/Matlab_and_DAQ</a>"</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/neuromech/index.php/Matlab_and_DAQ" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/neuromech/index.php?title=Talk:Matlab_and_DAQ&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource"><a href="/neuromech/index.php?title=Matlab_and_DAQ&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="/neuromech/index.php?title=Matlab_and_DAQ&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/neuromech/index.php?title=Special:UserLogin&amp;returnto=Matlab_and_DAQ" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/neuromech/skins/common/images/nmtronics_logo_txt.png);" href="/neuromech/index.php/Main_Page" title="Visit the main page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/neuromech/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="/neuromech/index.php/Neuromechatronics_Wiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="/neuromech/index.php/Neuromechatronics_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="/neuromech/index.php/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="/neuromech/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="/neuromech/index.php/Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/neuromech/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" title="Search Neuromechatronics Wiki" accesskey="f" type="search" name="search" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/neuromech/index.php/Special:WhatLinksHere/Matlab_and_DAQ" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/neuromech/index.php/Special:RecentChangesLinked/Matlab_and_DAQ" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="/neuromech/index.php/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/neuromech/index.php?title=Matlab_and_DAQ&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/neuromech/index.php?title=Matlab_and_DAQ&amp;oldid=5785" title="Permanent link to this revision of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/neuromech/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 14 June 2010, at 03:16.</li>
		<li id="viewcount">This page has been accessed 97,043 times.</li>
		<li id="privacy"><a href="/neuromech/index.php/Neuromechatronics_Wiki:Privacy_policy" title="Neuromechatronics Wiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="/neuromech/index.php/Neuromechatronics_Wiki:About" title="Neuromechatronics Wiki:About">About Neuromechatronics Wiki</a></li>
		<li id="disclaimer"><a href="/neuromech/index.php/Neuromechatronics_Wiki:General_disclaimer" title="Neuromechatronics Wiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.160 secs. --></body></html>
